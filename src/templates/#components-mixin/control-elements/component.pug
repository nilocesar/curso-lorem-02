mixin control-elements(els)
  - if(Array.isArray(els) && els.length)
    each el in els
      +elm(el)
        block
       
mixin elm(container)
  if (container.type == "bigtitle" || container.type == "bigTitle")
    - var tabInactive = (container.resource.tabInactive) ? -1 : acessib_count++
    - var ariaHidden = (container.resource.tabInactive) ? true : false
    h1.bigtitle(class!=container.resource.class, tabindex=tabInactive, aria-hidden=ariaHidden)&attributes((container.resource.attr) ? container.resource.attr : '')!= container.resource.content

  if (container.type == "title" || container.type == "Title")
    - var tabInactive = (container.resource.tabInactive) ? -1 : acessib_count++
    - var ariaHidden = (container.resource.tabInactive) ? true : false
    h2.title(class!=container.resource.class, tabindex=tabInactive, aria-hidden=ariaHidden)&attributes((container.resource.attr) ? container.resource.attr : '')!= container.resource.content

  if (container.type == "subtitle" || container.type == "subTitle")
    - var tabInactive = (container.resource.tabInactive) ? -1 : acessib_count++
    - var ariaHidden = (container.resource.tabInactive) ? true : false
    h3.subtitle(class!=container.resource.class, tabindex=tabInactive, aria-hidden=ariaHidden)&attributes((container.resource.attr) ? container.resource.attr : '')!= container.resource.content

  if (container.type == "text" || container.type == "Text")
    - if(container.resource.content.indexOf('<p') != -1)
      - var classTxt = (container.resource.class) ? container.resource.class : ''
      - var tabInactiveTxt = (container.resource.tabInactive) ? -1 : acessib_count++
      - var ariaHiddenTxt = (container.resource.tabInactive) ? true : false
      - var text = container.resource.content.replace( /<p/g, `<p aria-hidden=${ariaHiddenTxt} tabindex=${tabInactiveTxt} class="text ${classTxt}" `) 
      !=text
    - else 
      - var tabInactive = (container.resource.tabInactive) ? -1 : acessib_count++
      - var ariaHidden = (container.resource.tabInactive) ? true : false
      p.text(class!=container.resource.class, tabindex=tabInactive, aria-hidden=ariaHidden)&attributes((container.resource.attr) ? container.resource.attr : '')!= container.resource.content
  
  if (container.type == "ul" || container.type == "Ul" || container.type == "UL")
    ul.container-ul(class!=container.class)&attributes((container.resource.attr) ? container.resource.attr : '')
      each tl in container.resource.content
        - var tabInactive = (container.resource.tabInactive) ? -1 : acessib_count++
        - var ariaHidden = (container.resource.tabInactive) ? true : false
        li(class!=tl.class, tabindex=tabInactive, aria-hidden=ariaHidden)!=tl.li
        
  if (container.type == "smalltext" || container.type == "smallText" || container.type == "subtext" || container.type == "subText")
    - var tabInactive = (container.resource.tabInactive) ? -1 : acessib_count++
    - var ariaHidden = (container.resource.tabInactive) ? true : false
    p.smalltext(class!=container.resource.class, tabindex=tabInactive, aria-hidden=ariaHidden)&attributes((container.resource.attr) ? container.resource.attr : '')!= container.resource.content

  if (container.type == "image")
    .container-image
      - var filename = (container.resource.src.indexOf('/') != -1) ? container.resource.src : "../../assets/img/"+container.resource.src;
      - var classes = (container.resource.class) ? container.resource.class : '';
      - var alt = (container.resource.alt ? container.resource.alt : '' )
      - var tabindex = (container.resource.alt ? acessib_count++ : -1 )
      - var ariaHidden = (!container.resource.alt) ? true : false
      img(src=filename, class!=classes, alt=alt, aria-label=alt, tabindex=tabindex, aria-hidden=ariaHidden )&attributes((container.resource.attr) ? container.resource.attr : '')
  
  if (container.type == "video")
    .container-video
      - var filename = (container.resource.src.indexOf('/') != -1) ? container.resource.src : "../../assets/video/"+container.resource.src;
      - var classes = (container.resource.class) ? container.resource.class : '';
      - var alt = (container.resource.alt ? container.resource.alt : '' )
      - var tabindex = (container.resource.alt ? acessib_count++ : '' )
      - var ariaHidden = (!container.resource.alt) ? true : false
      video(src=filename, class!=classes, alt=alt, aria-label=alt, tabindex=tabindex, aria-hidden=ariaHidden )&attributes((container.resource.attr) ? container.resource.attr : '')
  
  if (container.type == "audio")
    .container-audio
      - var filename = (container.resource.src.indexOf('/') != -1) ? container.resource.src : "../../assets/audio/"+container.resource.src;
      - var classes = (container.resource.class) ? container.resource.class : '';
      - var alt = (container.resource.alt ? container.resource.alt : '' )
      - var tabindex = (container.resource.alt ? acessib_count++ : '' )
      - var ariaHidden = (!container.resource.alt) ? true : false
      audio(src=filename, class!=classes, alt=alt, aria-label=alt, tabindex=tabindex, aria-hidden=ariaHidden )&attributes((container.resource.attr) ? container.resource.attr : '')

  if (container.type == "iframe")
    .container-iframe
      - var filename = (container.resource.src.indexOf('/') != -1) ? container.resource.src : "../../assets/iframe/"+container.resource.src;
      - var classes = (container.resource.class) ? container.resource.class : '';
      - var alt = (container.resource.alt ? container.resource.alt : '' )
      - var tabindex = (container.resource.alt ? acessib_count++ : '' )
      - var ariaHidden = (!container.resource.alt) ? true : false
      iframe(src=filename, class!=classes, alt=alt, aria-label=alt, tabindex=tabindex, aria-hidden=ariaHidden )&attributes((container.resource.attr) ? container.resource.attr : '')

  if (container.type == "button")
    .container-btn
      - var tabInactive = (container.resource.tabInactive) ? -1 : acessib_count++
      - var ariaHidden = (container.resource.tabInactive) ? true : false
      button.botao(
        tabindex=tabInactive,
        aria-hidden=ariaHidden,
        aria-label=container.resource.alt,
        data-modal=container.resource.activeModal,
        class=container.resource.class
      )&attributes((container.resource.attr) ? container.resource.attr : '')
        +control-elements(container.resource.content)

  if (container.type == "link")
    .container-link
      - var tabInactive = (container.resource.tabInactive) ? -1 : acessib_count++
      - var ariaHidden = (container.resource.tabInactive) ? true : false
      a(
        tabindex=tabInactive,
        aria-hidden=ariaHidden,
        aria-label=container.resource.alt,
        class=container.resource.class,
        href=container.resource.href,
        target!=container.resource.target,
        download!=container.resource.download
      )&attributes((container.resource.attr) ? container.resource.attr : '')
        +control-elements(container.resource.content)
  
  if (container.type == "free")
    .freeBox(class!=container.resource.class)!= container.resource.content

  if (container.type == "boxInfo" || container.type == "guide" )
    .boxInfo.guide(class!=container.resource.class)
      +control-elements(container.resource.content)

  if (container.type == "card")
    .container-item-card(class!=container.resource.class)&attributes((container.resource.attr) ? container.resource.attr : '')
      +control-elements(container.resource.content)

  if (container.type == "line")
    .container-line(class!=container.class)&attributes((container.resource.attr) ? container.resource.attr : '')
      each tl in container.resource
        - if(tl.fraction == 'minor')
          .line-minor
            +control-elements(tl.content)
        - if(tl.fraction == 'major')
          .line-major
            +control-elements(tl.content)
  
  if (container.type == "list")
    .container-list(class!=container.class)&attributes((container.resource.attr) ? container.resource.attr : '')
      each item, i in container.resource
        - var it = i + 1;
        - var itArray = [item];
        +control-elements(itArray)
  
  if (container.type == "slides" || container.type == "carousel") 
    .container-slides(class!=container.class)&attributes((container.resource.attr) ? container.resource.attr : '')
      +interaction-slides(container.resource)
  
  if (container.type == "accordeon")
    .container-accordeon(class!=container.class)&attributes((container.resource.attr) ? container.resource.attr : '')
      +interaction-accordeon(container.resource)

  if (container.type == "menu-list")
    <label for="toggle">&#9776;</label>
    input(type="checkbox" id="toggle")
    .container-menu-list
      each menu in container.resource
        if (menu.navSections)
            a(id!=menu.navSections.id, href=menu.navSections.link, class!=menu.navSections.class, tabindex=-1)!=menu.navSections.content
        if (menu.navPages)
            a(id!=menu.navPages.id, onclick=menu.navPages.link, class!=menu.navPages.class)!=menu.navPages.content
  
  if (container.type == "exercise-quiz")
    +exercise-quiz(container.resource)
      block
  
  if (container.type == "exercise-relacionar")
    +exercise-relacionar(container.resource)
      block
  
  if (container.type == "exercise-memory-card")
    +exercise-memory-card(container.resource)
      block
  
  if (container.type == "exercise-drag-drop")
    +exercise-drag-drop(container.resource)
      block
      
  if (container.type == "timeline")
    +interaction-timeline(container.resource)

  if (container.type == "header")
    +interaction-header(container.resource)

  if (container.type == "assistance")
    +interaction-assistance(container.resource)

  if (container.type == "video-cuepoint")
    +interaction-videoCuepoint(container.resource)
      block
